<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Login</title>

<style>
* { box-sizing: border-box; }

html, body {
    margin: 0;
    width: 100%;
    height: 100%;
    background: black;
    font-family: monospace;
    color: #990e0e;
}

body {
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
}

/* LOGIN */
.login {
    font-size: 25px;
    letter-spacing: 2px;
    padding: 12px 32px;
    cursor: pointer;
    z-index: 2;
}

.login:hover {
    background: #990e0e;
    color: black;
}

/* VIDEO BOOT */
video {
    display: none;
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    z-index: 1;
}

/* DESKTOP */
.folder-wrapper {
    display: none;
    flex-direction: column;
    align-items: center;
    cursor: pointer;
    z-index: 2;
}

.folder { width: 40px; }

.folder-label {
    margin-top: 6px;
    font-size: 14px;
}

/* FINESTRA */
.window {
    display: none;
    position: absolute;
    width: 320px;
    background: black;
    border: 2px solid #990e0e;
    z-index: 5;
}

/* HEADER */
.window-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 6px 10px;
    border-bottom: 2px solid #990e0e;
    font-size: 14px;
}

.close-btn {
    background: none;
    border: none;
    color: #990e0e;
    font-size: 16px;
    cursor: pointer;
}

.close-btn:hover {
    background: #990e0e;
    color: black;
}

/* CONTENUTO */
.window-content {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 16px;
    padding: 16px;
}

/* ITEM */
.item {
    display: flex;
    flex-direction: column;
    align-items: center;
    cursor: pointer;
}

.item img { width: 32px; }

.item span {
    margin-top: 6px;
    font-size: 12px;
    text-align: center;
}

.item:hover span {
    text-decoration: underline;
}

/* SOLO FINESTRA VIDEO */
#videoWindow {
    width: 560px;
    max-width: 90vw;
    z-index: 10;
}

#videoWindow iframe {
    width: 100%;
    aspect-ratio: 16 / 9;
    border: none;
}

@media (max-width: 768px) {
    #videoWindow {
        width: 95vw;
    }
}
</style>
</head>

<body>

<div class="login" id="login">LOG IN</div>

<video id="introVideo" src="assets/osboot.mp4" playsinline preload="auto"></video>

<div class="folder-wrapper" id="folderWrapper">
    <img src="assets/folder.svg" class="folder">
    <div class="folder-label">docs</div>
</div>

<!-- FINESTRA DOCS -->
<div class="window" id="window">
    <div class="window-header">
        <span id="windowTitle">docs</span>
        <button class="close-btn" id="closeWindow">✕</button>
    </div>
    <div class="window-content" id="windowContent"></div>
</div>

<!-- FINESTRA VIDEO -->
<div class="window" id="videoWindow">
    <div class="window-header">
        <span>bad apple</span>
        <button class="close-btn" id="closeVideo">✕</button>
    </div>
    <iframe allow="autoplay; encrypted-media" allowfullscreen></iframe>
</div>

<script>
const login = document.getElementById("login");
const video = document.getElementById("introVideo");
const folderWrapper = document.getElementById("folderWrapper");

const windowEl = document.getElementById("window");
const windowContent = document.getElementById("windowContent");
const closeWindow = document.getElementById("closeWindow");

const videoWindow = document.getElementById("videoWindow");
const closeVideo = document.getElementById("closeVideo");
const iframe = videoWindow.querySelector("iframe");

/* FILE DOCS */
const docsFiles = ["bad apple", "clip2.mkv", "movie_final.avi"];

/* RENDER DOCS */
function renderDocs() {
    windowContent.innerHTML = "";

    docsFiles.forEach(file => {
        const el = document.createElement("div");
        el.className = "item";
        el.innerHTML = `
            <img src="assets/folder.svg">
            <span>${file}</span>
        `;

        el.onclick = () => {
            if (file === "bad apple") {
                iframe.src =
                    "https://www.youtube.com/embed/2Df_UAtA_Ok?autoplay=1";
                videoWindow.style.display = "block";
                videoWindow.style.top = "50%";
                videoWindow.style.left = "50%";
                videoWindow.style.transform = "translate(-50%, -50%)";
            }
        };

        windowContent.appendChild(el);
    });
}

/* LOGIN → VIDEO → DESKTOP */
login.onclick = () => {
    login.style.display = "none";
    video.style.display = "block";
    video.play();
};

function showDesktop() {
    video.pause();
    video.style.display = "none";
    folderWrapper.style.display = "flex";
}

video.addEventListener("ended", showDesktop);
video.addEventListener("click", showDesktop);

/* APRI DOCS */
folderWrapper.onclick = () => {
    windowEl.style.display = "block";
    renderDocs();
};

/* CHIUDI FINESTRA DOCS */
closeWindow.onclick = () => {
    windowEl.style.display = "none";
};

/* CHIUDI VIDEO */
closeVideo.onclick = () => {
    videoWindow.style.display = "none";
    iframe.src = "";
};
</script>

</body>
</html>
